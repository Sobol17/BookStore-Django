<div id="cart-item-{{ item.id }}" class="flex items-start gap-4 rounded-xl border border-accent-soft/60 bg-white/95 p-4">
    <div class="h-24 w-20 flex-shrink-0 overflow-hidden rounded-xl border border-accent-soft/60 bg-accent-soft/30">
        {% if item.product.main_image %}
            <img
                src="{{ item.product.main_image.url }}"
                alt="{{ item.product.name }}"
                class="h-full w-full object-cover"
            >
        {% else %}
            <div class="flex h-full w-full items-center justify-center text-xs font-semibold text-ink-muted">Нет фото</div>
        {% endif %}
    </div>

    <div class="flex flex-1 flex-col gap-3">
        <div class="flex items-start justify-between gap-3">
            <div class="space-y-1">
                <p class="text-sm font-semibold text-ink">{{ item.product.name }}</p>
                {% if item.product.authors %}
                    <p class="text-xs text-ink-muted">{{ item.product.authors }}</p>
                {% endif %}
                <p class="text-xs text-ink-muted">{{ item.quantity }} шт. × {{ item.product.formatted_price }}</p>
            </div>

            <button
                type="button"
                class="text-xs font-semibold text-ink-muted transition hover:text-accent"
                hx-post="{% url 'cart:remove_item' item.id %}"
                hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
                hx-target="#cart-modal"
                hx-swap="outerHTML"
                hx-trigger="click"
                hx-on::after-request="console.log('Remove Item {{ item.id }} Request Completed');"
            >
                Удалить
            </button>
        </div>

        <div class="flex items-center justify-between gap-3">
            <div class="inline-flex items-center rounded-xl border border-accent-soft bg-white text-ink">
                <button
                    type="button"
                    class="h-10 w-10 text-lg font-semibold transition hover:bg-accent-soft rounded-xl"
                    aria-label="Уменьшить количество"
                    hx-post="{% url 'cart:update_item' item.id %}"
                    hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
                    hx-vals='{"quantity": "{{ item.quantity|add:-1 }}"}'
                    hx-target="#cart-modal"
                    hx-swap="outerHTML"
                    hx-trigger="click"
                    hx-on::after-request="console.log('Update Quantity (-1) Request Completed for Item {{ item.id }}');"
                >
                    −
                </button>
                <span class="px-5 text-sm font-semibold">{{ item.quantity }}</span>
                <button
                    type="button"
                    class="h-10 w-10 text-lg font-semibold transition hover:bg-accent-soft rounded-xl"
                    aria-label="Увеличить количество"
                    hx-post="{% url 'cart:update_item' item.id %}"
                    hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
                    hx-vals='{"quantity": "{{ item.quantity|add:1 }}"}'
                    hx-target="#cart-modal"
                    hx-swap="outerHTML"
                    hx-trigger="click"
                    hx-on::after-request="console.log('Update Quantity (+1) Request Completed for Item {{ item.id }}');"
                >
                    +
                </button>
            </div>

            <div class="text-right">
                <p class="text-xs text-ink-muted">Сумма</p>
                <p class="text-lg font-semibold text-ink">{{ item.total_price }} {{ item.product.currency }}</p>
            </div>
        </div>
    </div>
</div>
