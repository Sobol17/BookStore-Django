<div data-name="product_detail" class="space-y-14">
  <div class="grid gap-10 xl:grid-cols-[minmax(0,1.15fr)_minmax(0,0.85fr)]">
    <div class="space-y-6">
      <section class="rounded-3xl border border-accent-soft/60 bg-white p-6" data-gallery-root>
        <div class="relative">
          <div class="swiper js-product-gallery overflow-hidden rounded-2xl border border-accent/20 bg-accent-soft/40">
            <div class="swiper-wrapper">
              {% if gallery_images %}
                {% for image in gallery_images %}
                  <div class="swiper-slide">
                    <div class="aspect-[3/4] w-full max-w-[450px] overflow-hidden bg-white">
                      <img
                        src="{{ image.url }}"
                        alt="{{ image.alt }}"
                        loading="lazy"
                        class="h-auto w-full object-cover object-center transition duration-500"
                      >
                    </div>
                  </div>
                {% endfor %}
              {% else %}
                <div class="swiper-slide">
                  <div class="flex aspect-[3/4] w-full items-center justify-center bg-accent-soft text-sm text-ink-muted">
                    Нет изображения
                  </div>
                </div>
              {% endif %}
            </div>
          </div>
        </div>
        {% if gallery_images|length > 1 %}
          <div class="mt-5">
            <div class="swiper js-product-gallery-thumbs">
              <div class="swiper-wrapper">
                {% for image in gallery_images %}
                  <div class="swiper-slide cursor-pointer">
                    <div class="aspect-square overflow-hidden rounded-xl border border-accent-soft bg-white transition hover:border-accent">
                      <img
                        src="{{ image.url }}"
                        alt="{{ image.alt }}"
                        loading="lazy"
                        class="h-full w-full object-cover"
                      >
                    </div>
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
        {% endif %}
      </section>

      <section class="rounded-3xl border border-accent-soft/60 bg-white p-6">
        <div class="flex items-center justify-between gap-4">
          <h2 class="text-lg font-semibold text-ink">Характеристики</h2>
          {% if object.stock_qty %}
            <span class="rounded-xl border border-accent-soft bg-accent-soft/40 px-3 py-1 text-xs font-semibold text-graphite">
              {{ object.stock_qty }} шт. в наличии
            </span>
          {% endif %}
        </div>
        <dl class="mt-4 grid gap-4 text-sm text-ink-muted sm:grid-cols-2">
          {% if object.condition %}
            <div>
              <dt class="font-semibold text-ink">Состояние</dt>
              <dd class="mt-1">{{ object.get_condition_display }}</dd>
            </div>
          {% endif %}
          {% if object.isbn %}
            <div>
              <dt class="font-semibold text-ink">ISBN</dt>
              <dd class="mt-1">{{ object.isbn }}</dd>
            </div>
          {% endif %}
          {% if object.year %}
            <div>
              <dt class="font-semibold text-ink">Год издания</dt>
              <dd class="mt-1">{{ object.year }}</dd>
            </div>
          {% endif %}
          {% if object.publisher %}
            <div>
              <dt class="font-semibold text-ink">Издательство</dt>
              <dd class="mt-1">{{ object.publisher }}</dd>
            </div>
          {% endif %}
          {% if object.genre %}
            <div>
              <dt class="font-semibold text-ink">Жанр</dt>
              <dd class="mt-1">{{ object.genre.name }}</dd>
            </div>
          {% endif %}
          {% if object.weight_g %}
            <div>
              <dt class="font-semibold text-ink">Вес</dt>
              <dd class="mt-1">{{ object.weight_g }} г</dd>
            </div>
          {% endif %}
        </dl>
      </section>
    </div>

    <aside class="space-y-6">
      <section class="flex flex-col gap-8 rounded-3xl border border-accent-soft/60 bg-white p-8">
        <div>
          <p class="text-xs text-graphite">
            {% if object.category %}{{ object.category.name }}{% else %}Редкое издание{% endif %}
          </p>
          <h1 class="mt-3 font-semibold text-4xl leading-tight text-ink">
            {{ object.name }}
          </h1>
          {% if object.authors %}
            <p class="mt-3 text-sm text-ink-muted">
              Авторы: {{ object.authors }}
            </p>
          {% endif %}
        </div>

        <div class="rounded-2xl border border-accent-soft bg-accent-soft/60 p-6">
          <p class="text-xs">Стоимость экземпляра</p>
          <div class="mt-3 flex flex-wrap items-baseline gap-4">
            <p class="text-3xl font-semibold text-ink">{{ object.formatted_price }}</p>
            {% if object.old_price %}
              <span class="text-sm text-ink-muted line-through">{{ object.formatted_old_price }}</span>
            {% endif %}
          </div>
          <div class="mt-6 flex flex-col gap-3 sm:flex-row">
            <button
              type="button"
              class="w-full rounded-xl border border-accent-soft bg-accent px-6 py-3 text-sm font-semibold uppercase tracking-[0.2em] text-ink transition hover:bg-accent-dark hover:text-graphite sm:w-auto"
            >
              В корзину
            </button>
            <button
              type="button"
              class="w-full rounded-xl border border-accent px-6 py-3 text-sm font-semibold uppercase tracking-[0.2em] text-graphite transition hover:bg-accent-soft sm:w-auto"
            >
              Задать вопрос
            </button>
          </div>
          <p class="mt-4 flex items-center gap-2 text-xs text-ink-muted">
            <i data-lucide="clock" class="h-4 w-4"></i>
            Отправим заказ в течение 3 рабочих дней
          </p>
        </div>

        {% if object.description %}
          <article class="prose prose-sm max-w-none prose-headings:font-serif prose-headings:text-ink prose-p:text-ink-muted prose-strong:text-ink">
            {{ object.description|linebreaks }}
          </article>
        {% endif %}
      </section>
    </aside>
  </div>

  {% if related_products %}
    {% include 'main/partials/_product-slider.html' with products=related_products title="Похожие издания" link=None %}
  {% endif %}

  {% if seo_text %}
    <section class="rounded-3xl border border-accent-soft/60 bg-white p-8">
      <h2 class="font-semibold text-2xl text-ink">Описание</h2>
      <div class="prose prose-sm mt-4 max-w-none prose-headings:font-serif prose-headings:text-ink prose-p:text-ink-muted prose-strong:text-ink">
        {{ seo_text|linebreaks }}
      </div>
    </section>
  {% endif %}
</div>
