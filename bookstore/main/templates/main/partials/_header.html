{% load static %}
<header class="bg-coffee text-paper shadow-lg shadow-coffee/50">
  <div class="mx-auto flex max-w-7xl items-center justify-between gap-6 px-6 py-6">
    <a href="{% url 'main:index' %}" class="font-serif text-2xl tracking-wider transition hover:text-accent-soft">
      Libra Antiqua
    </a>
    <div class="hidden items-center gap-4 md:flex flex-grow">
      <a
        href="{% url 'main:catalog_all' %}"
        class="rounded-lg border border-transparent bg-accent px-4 py-2 text-sm font-semibold text-paper transition hover:bg-accent-soft hover:text-coffee"
      >
        –ö–∞—Ç–∞–ª–æ–≥
      </a>
      <form action="{% url 'main:catalog_all' %}" method="get" class="relative flex-grow">
        <input
          type="text"
          name="q"
          value="{{ search_query }}"
          placeholder="–ü–æ–∏—Å–∫ –∫–Ω–∏–≥–∏ –∏–ª–∏ –∞–≤—Ç–æ—Ä–∞"
          class="w-full rounded-lg border border-accent-soft bg-white px-4 py-2 text-sm text-ink placeholder:text-ink-muted/60 focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/40"
        >
        <span class="pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-accent">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m21 21-5.2-5.2m0 0a7 7 0 1 0-9.9 0 7 7 0 0 0 9.9 0Z" />
          </svg>
        </span>
      </form>
    </div>
    <nav class="hidden items-center gap-6 text-sm md:flex" hx-boost="true">
      <a href="{% url 'main:index' %}" class="flex gap-x-2 items-center transition hover:text-accent-soft {% if not is_catalog_page and not object %}text-accent-soft{% endif %}">
        <i data-lucide="heart"></i>
        <span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
      </a>
      <a href="{% url 'main:catalog_all' %}" class="flex gap-x-2 items-center transition hover:text-accent-soft {% if is_catalog_page %}text-accent-soft{% endif %}">
        <i data-lucide="shopping-cart"></i>
        <span>–ö–æ—Ä–∑–∏–Ω–∞</span>
      </a>
      <a href="#contacts" class="flex gap-x-2 items-center transition hover:text-accent-soft">
        <i data-lucide="circle-user-round"></i>
        <span>–í–æ–π—Ç–∏</span>
      </a>
    </nav>
    <div x-data="{ open: false }" class="relative md:hidden">
      <button
        type="button"
        class="inline-flex items-center rounded-lg border border-paper/20 px-3 py-2 text-paper transition hover:border-accent-soft hover:text-accent-soft"
        x-on:click="open = !open"
        aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
      <div
        x-cloak
        x-show="open"
        x-transition.opacity.duration.200ms
        x-on:keydown.escape.window="open = false"
        x-on:click.self="open = false"
        class="fixed inset-0 z-40 flex min-h-screen flex-col overflow-y-auto bg-coffee/95 px-6 py-8"
      >
        <div class="flex items-center justify-between">
          <span class="font-serif text-xl tracking-wide text-paper">Libra Antiqua</span>
          <button
            type="button"
            class="inline-flex items-center rounded-lg border border-paper/20 p-2 text-paper transition hover:border-accent-soft hover:text-accent-soft"
            x-on:click="open = false"
            aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 6l12 12M6 18L18 6" />
            </svg>
          </button>
        </div>
        <nav class="mt-12 flex flex-col gap-6 text-base uppercase tracking-[0.35em] text-accent-soft" hx-boost="true" x-on:click="open = false">
          <a href="{% url 'main:index' %}" class="transition hover:text-paper">–ì–ª–∞–≤–Ω–∞—è</a>
          <a href="{% url 'main:catalog_all' %}" class="transition hover:text-paper">–ö–∞—Ç–∞–ª–æ–≥</a>
          <a href="#about" class="transition hover:text-paper">–û –º–∞–≥–∞–∑–∏–Ω–µ</a>
          <a href="#contacts" class="transition hover:text-paper">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
        </nav>
        <div class="mt-auto space-y-3 border-t border-paper/10 pt-6 text-sm text-accent-soft">
          <p class="uppercase tracking-[0.35em] text-xs text-accent">–°–≤—è–∑–∞—Ç—å—Å—è</p>
          <p>üìû +7 (999) 123-45-67</p>
          <p>‚úâÔ∏è hello@libra-antiqua.ru</p>
          <p>üï∞ –ø–Ω‚Äë—Å–± 11:00 ‚Äì 19:00</p>
        </div>
      </div>
    </div>
  </div>
  {% if categories %}
    <div class="border-t border-accent/30 bg-coffee/90">
      <div class="mx-auto flex max-w-7xl gap-3 overflow-x-auto px-6 py-3 text-xs uppercase tracking-[0.3em] text-accent-soft">
        {% for category in categories %}
          <a
            href="{% url 'main:catalog' category.slug %}"
            class="rounded-lg border border-transparent px-3 py-1 transition hover:border-accent-soft hover:text-paper {% if current_category == category.slug %}border-accent-soft bg-accent text-coffee{% endif %}"
          >
            {{ category.name }}
          </a>
        {% endfor %}
      </div>
    </div>
  {% endif %}
</header>
